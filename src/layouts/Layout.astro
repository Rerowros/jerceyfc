---
// src/layouts/Layout.astro
import  SpeedInsights  from "@vercel/speed-insights/astro"

import '@fontsource/manrope/400.css';
import '@fontsource/manrope/500.css';
import '@fontsource/manrope/800.css';
import '@fontsource/unbounded/400.css';
import '@fontsource/unbounded/700.css';
import '@fontsource/unbounded/900.css';

import '../styles/global.css';
import '../styles/lang-animate.css';
import { ClientRouter } from 'astro:transitions';
import Background from '../components/ui/Background.astro';
import MobileHint from '../components/ui/MobileHint.astro';

interface Props {
  title?: string;
  description?: string;
  pathname?: string;
}

const { 
  title = 'Full-Stack Developer | Jersey', 
  description = 'Jersey — Full-Stack разработчик (React, TypeScript, Python). Создание современных веб-приложений и автоматизация через Telegram-ботов.', 
  pathname = '/' 
} = Astro.props;
---

<!doctype html>
<html lang="ru" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="color-scheme" content="dark light">
    <meta name="darkreader-lock">
    
    <meta name="keywords" content="Web Development, React Developer, TypeScript, Python, Telegram Bots, Next.js, Astro, Frontend, Backend, Full-Stack, Разработка сайтов, Телеграм боты" />
    
    <title>{title}</title>

    <link rel="canonical" href={`https://jerseyfc.me.me${pathname}`} />
    <meta property="og:locale" content="ru_RU" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={`https://jerseyfc.me.me${pathname}`} />
    <meta property="og:image" content="/J.png" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@jerseyfc" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content="/J.png" />

    <script type="application/ld+json" is:inline>
      {JSON.stringify({
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Person",
            "name": "Jersey",
            "url": "https://jerseyfc.me.me/",
            "sameAs": ["https://t.me/jerseyfc", "https://github.com/Rerowros"],
            "jobTitle": "Full-Stack Web Developer",
            "makesOffer": 
            [
              {
                "@type": "Offer",
                "itemOffered": {
                  "@type": "Service",
                  "name": "Разработка Telegram-ботов"
                }
              },
              {
                "@type": "Offer",
                "itemOffered": {
                  "@type": "Service",
                  "name": "Создание сайтов на React"
                }
              }
            ],
            "knowsAbout": ["React", "TypeScript", "Python", "Next.js", "Telegram API"],
            "description": "Разработчик веб-приложений и Telegram-ботов с фокусом на React и Python."
          },
          {
            "@type": "WebSite",
            "name": "Jersey — Portfolio",
            "url": "https://jerseyfc.me/",
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://jerseyfc.me/?s={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          }
        ]
      })}
    </script>

    <link rel="icon" type="image/png" href="/J.png" />

    <meta name="view-transition" content="same-origin" />
    <ClientRouter />

    <script>
      import { applyTheme } from '../scripts/theme';
      applyTheme();
      document.addEventListener('astro:after-swap', applyTheme);
    </script>
  </head>
<body class="font-['Inter'] antialiased selection:bg-primary/30">
  <Background />
  <main class="relative z-10 w-full overflow-x-hidden">
    <slot />
  </main>
    <MobileHint />
  <SpeedInsights />

  
  <script>
    function initScrollObserver() {
      const animatedElements = document.querySelectorAll('.scroll-animate');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      animatedElements.forEach(element => observer.observe(element));
    }
    
    document.addEventListener('astro:page-load', initScrollObserver);
    document.addEventListener('DOMContentLoaded', initScrollObserver);
  </script>

  <script>
  import { initMagneticButtons } from '../scripts/magnetic';
  document.addEventListener('astro:page-load', initMagneticButtons);
  document.addEventListener('DOMContentLoaded', initMagneticButtons);
  </script>

</body>
</html>