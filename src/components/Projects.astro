---
// src/components/Projects.astro
import { projects } from '../data/projects.ts';
import ProjectCard from './ProjectCard.astro';

interface Props {
  limit?: number; // Опциональный проп для ограничения кол-ва проектов
  showViewAll?: boolean; // Показывать ли кнопку "Смотреть все"
}

const { limit, showViewAll = false } = Astro.props;

const displayProjects = limit ? projects.slice(0, limit) : projects;
---
<section id="projects">
  <!-- Анимируем заголовок и подзаголовок -->
  <div class="text-center mb-14">
    <h2 class="text-4xl md:text-5xl font-extrabold tracking-tight text-foreground scroll-animate">
      <span class="lang-ru">Избранные Работы</span>
      <span class="lang-en">Featured Work</span>
    </h2>
    <p class="text-lg text-muted-foreground mt-4 max-w-2xl mx-auto scroll-animate" style="transition-delay: 150ms;">
      <span class="lang-ru">Вот несколько проектов, которыми я особенно горжусь.</span>
      <span class="lang-en">Here are a few projects I'm particularly proud of.</span>
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {displayProjects.map((p, index) => (
      // ИЗМЕНЕНИЕ: Заменяем класс и свойство задержки
      <div class="scroll-animate h-full" style={`transition-delay: ${index * 100 + 300}ms`}>
        <ProjectCard project={p} />
      </div>
    ))}
  </div>

  {showViewAll && (
    // Анимируем и кнопку
    <div class="text-center mt-12 scroll-animate" style="transition-delay: 600ms;">
      <a href="/projects" class="btn">
        <span class="lang-ru">Все проекты</span>
        <span class="lang-en">View All Projects</span>
      </a>
    </div>
  )}
</section>
