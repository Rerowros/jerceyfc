---
// src/pages/about/index.astro
import { slide } from "astro:transitions";
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/layout/Header.astro";
import EmailIcon from "../../components/icons/EmailIcon.astro";
import TelegramIcon from "../../components/icons/TelegramIcon.astro";
import Footer from "../../components/layout/Footer.astro";
---

<Layout
  title="Обо мне | Jersey"
  description="Обо мне — разработчик современных веб-приложений и автоматизированных Telegram-ботов."
  pathname="/about"
>
  <Header />

  <section
    id="about-question"
    class="min-h-[60vh] md:min-h-[70vh] w-full flex items-center justify-center bg-primary text-primary-foreground relative overflow-hidden"
  >
    <h2
      id="question-title"
      class="text-3xl sm:text-4xl md:text-6xl font-extrabold tracking-tight opacity-0 scale-100 transition-all duration-700 text-center px-6 leading-tight"
    >
      <span class="lang-ru">Вам действительно это интересно?</span>
      <span class="lang-en">Are you really interested?</span>
    </h2>
  </section>

  <!-- Основной контент страницы -->
  <section
    id="about-card"
    class="w-full bg-background py-12 md:py-24"
    transition:animate={slide({ duration: "0.3s" })}
  >
    <div
      class="max-w-3xl mx-auto px-6 md:px-8 py-8 opacity-0 scale-100 transition-all duration-700 space-y-12"
    >
      <div>
        <h3
          class="text-2xl md:text-4xl font-extrabold text-foreground mb-4 md:mb-6"
        >
          <span class="lang-ru">Мой подход к работе</span>
          <span class="lang-en">My Approach to Work</span>
        </h3>
        <div class="text-base md:text-lg text-muted-foreground space-y-4">
          <p>
            <span class="lang-ru">
              Я специализируюсь на веб-разработке (React, TypeScript) и создании
              Telegram-ботов (Python). Для меня код — это инструмент решения
              бизнес-задач.
            </span>
            <span class="lang-en">
              I specialize in web development (React, TypeScript) and creating
              Telegram bots (Python). For me, code is a tool for solving
              business problems.
            </span>
          </p>
          <p>
            <span class="lang-ru">
              Стремлюсь писать чистый, поддерживаемый код, который легко
              масштабировать. Если это веб-приложение — оно должно быть быстрым
              и отзывчивым. Если бот — он должен работать без сбоев.
            </span>
            <span class="lang-en">
              I strive to write clean, maintainable code that is easy to scale.
              If it's a web app, it must be fast and responsive. If it's a bot,
              it must run flawlessly.
            </span>
          </p>
        </div>
      </div>

      <!-- Остальные блоки (Принципы, Контакты) остались без изменений, так как они универсальны -->
      <div>
        <h3
          class="text-2xl md:text-4xl font-extrabold text-foreground mb-4 md:mb-6"
        >
          <span class="lang-ru">Мои принципы</span>
          <span class="lang-en">My Principles</span>
        </h3>
        <div class="text-base md:text-lg text-muted-foreground space-y-4">
          <ul class="space-y-4 list-inside">
            <li class="flex items-start">
              <svg
                class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"></path></svg
              >
              <span>
                <strong class="text-foreground"
                  ><span class="lang-ru">Честность.</span><span class="lang-en"
                    >Honesty.</span
                  ></strong
                >
                <br class="md:hidden" />
                <span class="lang-ru">Говорить прямо о проблемах и сроках.</span
                >
                <span class="lang-en"
                  >To speak directly about problems and deadlines.</span
                >
              </span>
            </li>
            <li class="flex items-start">
              <svg
                class="w-6 h-6 text-primary mr-3 mt-1 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                ><path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"></path></svg
              >
              <span>
                <strong class="text-foreground"
                  ><span class="lang-ru">Качество.</span><span class="lang-en"
                    >Quality.</span
                  ></strong
                >
                <br class="md:hidden" />
                <span class="lang-ru"
                  >Делать так, чтобы потом не пришлось переделывать.</span
                >
                <span class="lang-en"
                  >Do it right so you don't have to redo it later.</span
                >
              </span>
            </li>
          </ul>
        </div>
      </div>

      <div class="border-l-4 border-primary pl-4 md:pl-6 py-2">
        <h4 class="text-xl md:text-3xl font-bold text-foreground mb-3">
          <span class="lang-ru" data-no-animate>
            <span>За деньги — да. </span>
            <span class="spoiler-text" title="Нажмите, чтобы увидеть"
              >Но не хуйню.</span
            >
          </span>
          <span class="lang-en" data-no-animate>
            <span>For money — yes. </span>
            <span class="spoiler-text" title="Click to reveal"
              >But not for bullshit.</span
            >
          </span>
        </h4>
        <p class="text-base md:text-lg text-muted-foreground">
          <span class="lang-ru">
            Ценю время и результат. Работаю с современным стеком технологий (TS,
            React, Python), чтобы создавать продукты, которыми приятно
            пользоваться.
          </span>
          <span class="lang-en">
            I value time and results. I work with a modern tech stack (TS,
            React, Python) to create products that are a pleasure to use.
          </span>
        </p>
      </div>

      <div class="text-center pt-12 md:pt-16">
        <h3 class="text-2xl md:text-3xl font-bold text-foreground mb-4">
          <span class="lang-ru">Готовы к диалогу?</span>
          <span class="lang-en">Ready to talk?</span>
        </h3>
        <p class="text-muted-foreground mb-8 max-w-xl mx-auto">
          <span class="lang-ru"
            >Пишите в Telegram — это самый быстрый способ связи.</span
          >
          <span class="lang-en"
            >Message me on Telegram — it's the fastest way to connect.</span
          >
        </p>
        <div
          class="flex flex-col sm:flex-row items-center justify-center gap-4"
        >
          <a
            href="mailto:contact@jerceyfc.me"
            class="btn group w-full sm:w-auto flex items-center justify-center gap-3 px-6 py-3 transition-all duration-200"
          >
            <EmailIcon class="w-6 h-6" />
            <span class="font-semibold">
              <span class="lang-ru">Email</span>
              <span class="lang-en">Email</span>
            </span>
          </a>
          <a
            href="https://t.me/jerseyfc"
            target="_blank"
            rel="noopener noreferrer"
            class="btn group w-full sm:w-auto flex items-center justify-center gap-3 px-6 py-3 transition-all duration-200"
          >
            <TelegramIcon class="w-6 h-6" />
            <span class="font-semibold">
              <span class="lang-ru">Telegram</span>
              <span class="lang-en">Telegram</span>
            </span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Скрипт анимации About остался без изменений -->
  <script>
    function initAboutAnimations() {
      const question = document.getElementById("question-title");
      const card = document.getElementById("about-card");
      const cardContent = card ? card.querySelector(".max-w-3xl") : null;
      const easeOut = (t) => 1 - Math.pow(1 - t, 3);
      function animateQuestion() {
        const section = document.getElementById("about-question");
        if (!section || !question) return;
        const rect = section.getBoundingClientRect();
        const vh = window.innerHeight;
        let progress = Math.min(1, Math.max(0, (vh - rect.top) / (vh * 0.8)));
        progress = easeOut(progress);
        window.requestAnimationFrame(() => {
          question.style.opacity = String(progress);
          question.style.transform = `scale(${0.9 + progress * 0.1})`;
        });
      }
      function animateCard() {
        if (!card || !cardContent) return;
        const rect = card.getBoundingClientRect();
        const triggerPoint = window.innerHeight * 0.8;
        if (rect.top < triggerPoint) {
          let progress = Math.min(
            1,
            Math.max(0, (triggerPoint - rect.top) / (window.innerHeight * 0.5))
          );
          progress = easeOut(progress);
          window.requestAnimationFrame(() => {
            cardContent.style.opacity = String(progress);
            cardContent.style.transform = `translateY(${50 * (1 - progress)}px)`;
          });
        }
      }
      function onScroll() {
        animateQuestion();
        animateCard();
      }
      window.addEventListener("scroll", onScroll, { passive: true });
      onScroll();
      const spoilers = document.querySelectorAll(".spoiler-text");
      spoilers.forEach((spoiler) => {
        spoiler.addEventListener(
          "click",
          () => {
            spoiler.classList.add("is-revealed");
          },
          { once: true }
        );
      });
    }
    document.addEventListener("DOMContentLoaded", initAboutAnimations);
    document.addEventListener("astro:page-load", initAboutAnimations);
  </script>

  <style>
    .spoiler-text {
      filter: blur(5px);
      cursor: pointer;
      transition: filter 0.3s ease-in-out;
      background-color: rgba(128, 128, 128, 0.15);
      padding: 0 0.1em;
      border-radius: 5px;
    }
    .spoiler-text.is-revealed {
      filter: blur(0);
      cursor: text;
      background-color: transparent;
    }
  </style>

  <Footer />
</Layout>
